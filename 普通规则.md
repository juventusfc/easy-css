# 普通规则

```css
选择器 {
  声明块
}

p {
  color: red;
  font-size: 40px;
}
```

普通规则由选择器和声明区块组成，通过使用选择器选中页面中的指定元素，声明块指定要为元素设置的样式。

## 选择器

### 简单选择器

根据某一特征选择元素：

![simple-selector](./images/simple-selector.png)

#### 类型选择器

```css
div {
  font-size: 20px;
}
```

如果需要考虑 html 或者 xml 命名空间的问题，就复杂了。

比如 svg，它是定义在 [http://www.w3.org/2000/svg](http://www.w3.org/2000/svg) 命名空间下的。svg 里的 a 和 HTML 里的 a 需要使用带命名空间的类型选择器。

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>JS Bin</title>
    <style>
      @namespace svg url(http://www.w3.org/2000/svg);
      @namespace html url(http://www.w3.org/1999/xhtml);
      svg|a {
        stroke: blue;
        stroke-width: 1;
      }
      html|a {
        font-size: 40px;
      }
    </style>
  </head>
  <body>
    <svg
      width="100"
      height="28"
      viewBox="0 0 100 28"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
    >
      <desc>Example link01 - a link on an ellipse</desc>
      <a xlink:href="http://www.w3.org">
        <text y="100%">name</text>
      </a>
    </svg>
    <br />
    <a href="javascript:void 0;">name</a>
  </body>
</html>
```

#### 全体选择器

```css
* {
  font-size: 40px;
}
```

#### id 选择器

```css
#identified {
  background-color: skyblue;
}
```

#### class 选择器

```css
.red {
  color: #f33;
}
```

#### 属性选择器

属性选择器基于标签所拥有的属性进行选择。属性选择器的语法为 `[attr] {}`、 `[attr=value] {}`等。

- [属性名] 选择含有指定属性的元素
- [属性名=属性值] 选择含有指定属性和属性值的元素
- [属性名^=属性值] 选择属性值以指定值开头的元素
- [属性名$=属性值] 选择属性值以指定值结尾的元素
- [属性名*=属性值] 选择属性值中含有某值的元素的元素

```css
[title] {
  color: orange;
}
```

#### 伪类选择器

伪类指的是不存在的类，特殊的类。伪类用来描述一个元素的特殊状态。比如：第一个子元素、被点击的元素、鼠标移入的元素等。

伪类的语法为 `:xxx`。

##### 树结构关系伪类选择器

- :root  
  选择 HTML 文件的 html 标签。经常用于设置 CSS 变量。

  ```css
  :root {
    background: yellow;
    --main-color: hotpink;
    --pane-padding: 5px 42px;
  }
  ```

- 根据所有的子元素进行排序

  - `:first-child` 第一个子元素
  - `:last-child` 最后一个子元素
  - `:nth-child()` 选中第 n 个子元素
  - `:only-child` 唯一的子元素

- 根据同类型的元素进行排序

  - `:first-of-type`
  - `:last-of-type`
  - `:nth-of-type()`
  - `:only-of-type`
  - `:empty`

##### 链接与行为伪类关系选择器

- `:any-link` 表示任意的链接，包括 a、area 和 link 标签都可能匹配到这个伪类
- `:focus` 表示焦点落在这个元素之上
- `:target` 用于选中浏览器 URL 的 hash 部分所指示的元素
- `:link` 用来表示没访问过的链接（正常的链接）

  ```css
  a:link {
    color: red;
  }
  ```

- `:visited` 用来表示访问过的链接，由于隐私的原因，所以 visited 这个伪类只能修改链接的颜色

  ```css
  a:visited {
    color: orange; /* font-size: 50px; */
  }
  ```

- `:hover` 用来表示鼠标悬浮上去的状态

  ```css
  a:hover {
    color: aqua;
    font-size: 50px;
  }
  ```

- `:active` 用来表示鼠标点击

  ```css
  a:active {
    color: yellowgreen;
  }
  ```

注意，在使用时，需要遵循 **LoVe, HAte 原则**，即按照 `link`、`visited`、`hover`、`active` 这个顺序。

##### 逻辑伪类选择器

主要是:not 伪类，表示对括号内的条件取非。

```css
*|*:not(:hover) {
  color: red;
}
```

上面表示，`*|*`表示所有命名空间下的所有元素，当不是处于 `:hover` 状态下时，都被选中，文字都是红色。

### 选择器的组合

上面已经介绍了简单选择器，通过对简单选择器的组合，可以组合成选择器列表和复合选择器以及复杂选择器。当组合后的选择器再一次组合，会有组合的优先级。

- 选择器列表(第一优先级)  
  用连接符号“逗号”分隔，表示逻辑关系“或”，当很多选择器中的声明区块内容相同时使用，减少冗余代码。如下表示 h1 或 h2 或 h3 的颜色是红色。

  ```css
  h1,
  h2,
  h3 {
    color: red;
  }
  ```

- 复合选择器(第二优先级)  
  无连接符号，是连写的选择器，表示逻辑关系“且”。如下表示选中的元素，既要符合元素类型是 div，又要符合 id 是 main。

  ```css
  div#main {
    color: red;
  }
  ```

- 复杂选择器(第三优先级)  
  复杂选择器是针对节点关系的选择。
  - **空格**：后代，表示选中所有符合条件的后代节点， 例如“ .a .b ”表示选中所有具有 class 为 a 的后代节点中 class 为 b 的节点。
  - **>** : 子代，表示选中符合条件的子节点，例如“ .a>.b ”表示：选中所有“具有 class 为 a 的子节点中，class 为 b 的节点”。
  - **+**: 后继，表示选中所有符合条件的后继节点，后继节点即跟当前节点具有同一个父元素，并出现在它之后的节点，例如“ .a~.b ”表示选中所有具有 class 为 a 的后继中，class 为 b 的节点。
  - **~**: 直接后继，表示选中符合条件的直接后继节点，直接后继节点即 nextSlibling。例如 “.a+.b ”表示选中所有具有 class 为 a 的下一个 class 为 b 的节点。
  - **||**: 列选择器，表示选中对应列中符合条件的单元格。

### 选择器的优先级

当多个选择器选中同一个元素后，应用的 CSS 规则有优先级。CSS 标准用一个三元组 (a, b, c) 来构成一个选择器的优先级。

- id 选择器的数目记为 a；
- 伪类选择器和 class 选择器的数目记为 b；
- 伪元素选择器和标签选择器数目记为 c；
- “\*” 不影响优先级。

计算优先级的公式是：`specificity = base * base * a + base * b + c`,base 是一个足够大的正整数。数字大的优先级高。

另外，行内样式的优先级高于 CSS 规则。`!important`是最优先的样式，需要谨慎使用。

实际应用时，不用去记忆这些优先级，只要遵循“根据 id 选单个元素” “class 和 class 的组合选成组元素” “tag 选择器确定页面风格”这样的简单原则来使用选择器，不要搞出过于复杂的选择器。” 这些原则来就行。碰到是在复杂的，打开浏览器调试下也方便。

### 伪元素

严格来说，伪元素不单单是一种选择规则，还是一种机制。它会把实际不存在的元素硬选出来。

- ::first-line: 表示元素的第一行
- ::first-letter: 表示元素的第一个字母
- ::before: 表示在元素之前插入一个虚拟元素
- ::after: 表示在元素之后插入一个虚拟元素

```css
p::first-line {
  text-transform: uppercase;
}
p::first-letter {
  text-transform: uppercase;
  font-size: 2em;
  float: left;
}
p.special::before {
  display: block;
  content: "pseudo! ";
}
```

## 声明区块

声明区块由一个一个的声明组成。声明是一个名值对结构 `属性名: 值;`，属性名和值之间以 `:` 连接，以 `;` 结尾 。

一些属性名会要求产生函数类型的值。CSS 的常用计算型函数如下：

- `calc()`
- `max()`
- `min()`
- `clamp()`
- `toggle()`
- `attr()`
